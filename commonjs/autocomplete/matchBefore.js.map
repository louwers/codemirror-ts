{"version":3,"file":"matchBefore.js","sourceRoot":"","sources":["../../../src/autocomplete/matchBefore.ts"],"names":[],"mappings":";;;AAAA,uDAAiD;AACjD,iEAA2D;AAE3D,wHAAwH;AACxH,mCAAmC;AACnC,SAAgB,WAAW,CAAC,IAAY,EAAE,GAAW,EAAE,IAAY;IACjE,MAAM,IAAI,GAAG,IAAA,wCAAiB,EAAC,IAAI,EAAE,GAAG,CAAC,CAAC;IAC1C,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,GAAG,GAAG,CAAC,CAAC;IAC3C,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;IAC9D,IAAI,KAAK,GAAG,GAAG,CAAC,MAAM,CAAC,IAAA,8BAAY,EAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC;IAClD,OAAO,KAAK,GAAG,CAAC;QACd,CAAC,CAAC,IAAI;QACN,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,GAAG,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC;AAC/D,CAAC;AARD,kCAQC","sourcesContent":["import { ensureAnchor } from \"./ensureAnchor.js\";\nimport { getLineAtPosition } from \"./getLineAtPosition.js\";\n\n// From: https://github.com/codemirror/autocomplete/blob/53cc58393252659ac4a86162b40afef13eeb2241/src/completion.ts#L111\n// TODO: do we need to vendor this?\nexport function matchBefore(code: string, pos: number, expr: RegExp) {\n  const line = getLineAtPosition(code, pos);\n  let start = Math.max(line.from, pos - 250);\n  let str = line.text.slice(start - line.from, pos - line.from);\n  let found = str.search(ensureAnchor(expr, false));\n  return found < 0\n    ? null\n    : { from: start + found, to: pos, text: str.slice(found) };\n}\n"]}